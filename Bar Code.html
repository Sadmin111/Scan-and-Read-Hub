<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Barcode Generator</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Inter', sans-serif;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        background:
          radial-gradient(circle at top left, #22c55e22, #0f766e11, #020617ff),
          #020617;
        color: #e5e7eb;
        overflow: hidden;
        position: relative;
    }

    /* BACKGROUND FLOATING BARCODE ANIMATION */
    .barcode-floating-bg {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
        pointer-events: none;
    }

    .float-barcode {
        position: absolute;
        opacity: 0.32; /* more visible */
        animation: floatUp linear infinite;
        /* bright teal-ish glow to match theme */
        filter: hue-rotate(140deg) saturate(1.4)
                drop-shadow(0 0 12px rgba(45, 212, 191, 0.8));
        mix-blend-mode: screen;
    }

    @keyframes floatUp {
        0% { transform: translateY(110vh) rotate(0deg); }
        100% { transform: translateY(-130vh) rotate(4deg); }
    }

    /* CARD */
    .container {
        position: relative;
        z-index: 10;
        width: 100%;
        max-width: 720px;
        background: radial-gradient(circle at top left, #0f172a, #020617);
        border-radius: 28px;
        padding: 28px 32px 22px;
        box-shadow:
          0 30px 80px rgba(0, 0, 0, 0.6),
          0 0 0 1px rgba(148, 163, 184, 0.2);
        backdrop-filter: blur(24px);
        animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .title {
        font-size: 1.6rem;
        font-weight: 600;
        margin-bottom: 4px;
    }

    .subtitle {
        font-size: 0.85rem;
        color: #9ca3af;
        margin-bottom: 18px;
    }

    .field-label {
        font-size: 0.7rem;
        letter-spacing: 0.12em;
        margin-bottom: 6px;
        text-transform: uppercase;
        color: #94a3b8;
    }

    .row {
        margin-top: 8px;
    }

    input {
        width: 100%;
        padding: 12px 14px;
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.9);
        color: #e5e7eb;
        font-size: 0.9rem;
        outline: none;
        transition: 0.2s;
    }

    input:focus {
        border-color: #6366f1;
        box-shadow: 0 0 0 2px rgba(99,102,241,0.55);
    }

    input.error {
        border-color: #ef4444;
        box-shadow: 0 0 0 2px rgba(248,113,113,0.55);
    }

    .actions {
        display: flex;
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    button {
        border: none;
        padding: 8px 20px;
        border-radius: 18px;
        font-size: 0.85rem;
        font-weight: 500;
        cursor: pointer;
        transition: 0.2s;
        white-space: nowrap;
    }

    button:disabled {
        opacity: 0.45;
        cursor: not-allowed;
        box-shadow: none;
    }

    .btn-primary {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #0f172a;
        box-shadow: 0 12px 35px rgba(34, 197, 94, 0.45);
    }

    .btn-primary:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 16px 40px rgba(34, 197, 94, 0.65);
    }

    .btn-secondary {
        background: rgba(15,23,42,0.85);
        color: #e5e7eb;
        border: 1px solid rgba(148,163,184,0.6);
        box-shadow: 0 8px 25px rgba(15, 23, 42, 0.7);
    }

    .btn-secondary:hover:not(:disabled) {
        background: rgba(15,23,42,1);
        transform: translateY(-1px);
    }

    #barcodeContainer {
        margin-top: 20px;
        padding: 14px 16px 10px;
        border-radius: 16px;
        border: 1px dashed rgba(148, 163, 184, 0.6);
        background: rgba(15, 23, 42, 0.9);
        display: none;
    }

    #barcode {
        width: 100%;
        max-width: 360px;
        margin: 0 auto;
        display: block;
    }

    .hint {
        margin-top: 8px;
        font-size: 0.72rem;
        color: #64748b;
    }

    .footer {
        margin-top: 16px;
        font-size: 0.72rem;
        color: #64748b;
        display: flex;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
    }

    .badge {
        padding: 3px 10px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.6);
        text-transform: uppercase;
        letter-spacing: 0.12em;
        font-size: 0.65rem;
    }

    @media (max-width: 768px) {
        .container {
            padding: 24px 20px 22px;
            border-radius: 24px;
        }
        .title {
            font-size: 1.5rem;
        }
    }
</style>
</head>

<body>

<div class="barcode-floating-bg" id="bgBarcodeContainer"></div>

<div class="container">
    <div class="header">
        <div class="title">Barcode Generator</div>
        <div class="subtitle">Enter any text or number to generate a CODE128 barcode and download it instantly.</div>
    </div>

    <div class="row">
        <div class="field-label">Input VALUE</div>
        <input type="text" id="barcodeInput" placeholder="Enter text / number for barcode...">
    </div>

    <div class="actions">
        <button class="btn-secondary" onclick="clearAll()">Clear</button>
        <button class="btn-secondary" id="downloadBtn" onclick="downloadBarcode()" disabled>
            Download Barcode
        </button>
        <button class="btn-primary" id="generateBtn" onclick="generateBarcode()">Generate Barcode</button>
    </div>

    <div id="barcodeContainer">
        <svg id="barcode"></svg>
        <div class="hint">CODE128 format Â· Works best with letters &amp; numbers</div>
    </div>

    <div class="footer">
        <span class="badge">Sharp CODE128</span>
        <span>Optimized for labels, stock &amp; products</span>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

<script>
    let animationStarted = false;

    function startBackgroundAnimation() {
        if (animationStarted) return;
        animationStarted = true;

        const container = document.getElementById("bgBarcodeContainer");
        container.innerHTML = "";

        const dummyValues = ["ITEM01", "SCANME", "123456", "BARCODE", "DUMMY1", "987654", "LABEL", "PRODUCT", "STOCK", "CODE128"];

        for (let i = 0; i < 10; i++) {
            const img = document.createElement("img");
            const text = encodeURIComponent(dummyValues[i % dummyValues.length]);
            img.src =
                "https://bwipjs-api.metafloor.com/?bcid=code128&text=" +
                text +
                "&scale=2&includetext" +
                "&background=000000&forecolor=ffffff"; // bright on dark bg

            img.className = "float-barcode";

            const width = Math.random() * 60 + 80;
            const left = Math.random() * 100;
            const duration = Math.random() * 10 + 15;
            const delay = Math.random() * 5;

            img.style.width = width + "px";
            img.style.left = left + "vw";
            img.style.animationDuration = duration + "s";
            img.style.animationDelay = delay + "s";

            container.appendChild(img);
        }
    }

    function generateBarcode() {
        const input = document.getElementById("barcodeInput");
        const value = input.value.trim();

        if (value === "") {
            input.classList.add("error");
            setTimeout(() => input.classList.remove("error"), 500);
            return;
        }

        if (typeof JsBarcode === "undefined") {
            alert("JsBarcode library not loaded. Check your internet / CDN blocking.");
            console.error("JsBarcode is undefined. CDN may be blocked.");
            return;
        }

        startBackgroundAnimation();

        const svg = document.getElementById("barcode");

        try {
            JsBarcode(svg, value, {
                format: "CODE128",
                lineColor: "#e5e7eb",
                background: "transparent",
                width: 2,
                height: 80,
                displayValue: true,
                font: "Inter",
                fontSize: 14,
                margin: 10
            });

            document.getElementById("barcodeContainer").style.display = "block";
            document.getElementById("downloadBtn").disabled = false;
            console.log("Barcode generated for:", value);
        } catch (e) {
            console.error("Barcode generation error:", e);
            input.classList.add("error");
            alert("Could not generate barcode for this value.");
            setTimeout(() => input.classList.remove("error"), 800);
        }
    }

    function clearAll() {
        const input = document.getElementById("barcodeInput");
        input.value = "";
        input.classList.remove("error");
        document.getElementById("barcode").innerHTML = "";
        document.getElementById("barcodeContainer").style.display = "none";
        document.getElementById("downloadBtn").disabled = true;
    }

    function downloadBarcode() {
        const svg = document.getElementById("barcode");
        const serializer = new XMLSerializer();
        const svgString = serializer.serializeToString(svg);

        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        const img = new Image();
        img.onload = function () {
            canvas.width = img.width * 2;
            canvas.height = img.height * 2;
            ctx.setTransform(2, 0, 0, 2, 0, 0);
            ctx.drawImage(img, 0, 0);

            const pngData = canvas.toDataURL("image/png");
            const link = document.createElement("a");
            link.href = pngData;
            link.download = "barcode.png";
            link.click();
        };

        const svgBase64 = btoa(unescape(encodeURIComponent(svgString)));
        img.src = "data:image/svg+xml;base64," + svgBase64;
    }

    // Press Enter to generate
    document.getElementById("barcodeInput").addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
            e.preventDefault();
            generateBarcode();
        }
    });
</script>

</body>
</html>
